<div class="row">
  <div class="col-md-9 pr-md-0">
    <input *ngIf="settings&&settings.Params" type="text" class="form-control" [(ngModel)]="settings.Params.Search"
           (change)="validateSearch()" (keyup)="$event.stopPropagation()"
           placeholder="{{settings && settings.Texts ? settings.Texts.SearchPlaceHolder : ''}}">
  </div>
  <div class="col-md-3 mt-2 mt-md-0">
    <div class="btn-group btn-block">
      <button class="btn btn-secondary btn-block text-nowrap search" type="button" (click)="validateSearch()">
        <i class="fa fa-search"></i> {{settings && settings.Texts ? settings.Texts.SearchButton : '' }}
      </button>
      <button type="button" class="btn btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
        <span class="sr-only"></span>
      </button>
      <div *ngIf="settings&&settings.Filters&&settings.Filters.length > 0" class="dropdown-menu dropdown-menu-right">
        <button *ngFor="let filter of settings.Filters" class="dropdown-item" (click)="setChecked(filter, $event)"><i
          [ngClass]="'fa '+(filter.Checked?'fa-check-square':'fa-square')"></i> {{filter.Name}}</button>
      </div>
    </div>
  </div>
</div>

<div class="table-responsive">
  <table class="table table-striped table-bordered dataTable">
    <thead *ngIf="settings&&settings.Columns">
    <tr>
      <th *ngFor="let column of settings.Columns" [style.width.%]="column.Width"
          title="{{column.Title}}">{{column.Title}}</th>
    </tr>
    </thead>
    <tbody *ngIf="settings&&settings.Columns&&settings.Response&&settings.Response.Data&&settings.Response.Data.Source">
    <tr *ngFor="let data of settings.Response.Data.Source">
      <td *ngFor="let column of data.Columns" title="column">{{column}}</td>
    </tr>
    </tbody>
  </table>
</div>

<nav class="row">
  <div class="col-md-4 offset-md-4 page-section">
    <div *ngIf="settings&&settings.Response&&settings.Params" class="input-group input-group-sm page-param mx-auto">
      <input type="number" class="form-control form-control-sm" [(ngModel)]="settings.Params.Page" (change)="validatePage()"
             (wheel)="$event.currentTarget.blur()" (keyup)="$event.stopPropagation()">
      <div class="input-group-append">
        <span class="input-group-text">/ {{settings.Response.Page.Count.toLocaleString()}}</span>
      </div>
      <input type="number" class="form-control form-control-sm ml-1" [(ngModel)]="settings.Params.Length" (change)="validateLength()"
             (wheel)="$event.currentTarget.blur()" (keyup)="$event.stopPropagation()">
    </div>
  </div>
</nav>

<nav class="row mt-2 mt-sm-n3">
  <div class="col-6 mt-sm-n3 page-button">
    <button *ngIf="settings&&settings.Response" class="page-link {{settings.Response.Page.Number > 1 ? '' : 'disabled'}}" (click)="privPage()">
      <span aria-hidden="true">&laquo;</span>
    </button>
  </div>

  <div class="col-6 mt-sm-n3 page-button">
    <button *ngIf="settings&&settings.Response" class="page-link pull-right {{settings.Response.Page.Number < settings.Response.Page.Count ? '' : 'disabled'}}" (click)="nextPage()">
      <span aria-hidden="true">&raquo;</span>
    </button>
  </div>
</nav>
